{
    "name": "Convert Video",
    "revision": 2,
    "minimumVersion": "1.0.0.0",
    "group": "Video",
    "description": "A flow that will convert a video file",
    "save": true,
    "Parts": [
      {
        "Uid": "00000000-0000-0000-0000-000000000001",
        "Name": "",
        "node": "VideoFile",
        "xPos": 100,
        "yPos": 90,
        "Outputs": 1,
        "connections": [
          {
            "Input": 1,
            "Output": 1,
            "node": "00000000-0000-0000-0000-000000000002"
          }
        ],
        "Model": null
      },
      {
        "Uid": "00000000-0000-0000-0000-000000000002",
        "Name": "FFMPEG Builder: Start",
        "node": "FfmpegBuilderStart",
        "xPos": 100,
        "yPos": 230,
        "Outputs": 1,
        "connections": [
          {
            "Input": 1,
            "Output": 1,
            "node": "00000000-0000-0000-0000-000000000003"
          }
        ],
        "Model": {}
      },
      {
        "Uid": "00000000-0000-0000-0000-000000000003",
        "Name": "FFMPEG Builder: Remux to MKV",
        "node": "FfmpegBuilderRemuxToMkv",
        "xPos": 100,
        "yPos": 380,
        "Outputs": 1,
        "connections": [],
        "Model": {}
      },
      {
        "Uid": "00000000-0000-0000-0000-000000000004",
        "Name": "FFMPEG Builder: Crop Black Bars",
        "node": "FfmpegBuilderCropBlackBars",
        "xPos": 100,
        "yPos": 500,
        "Outputs": 2,
        "connections": [
          {
            "Input": 1,
            "Output": 1,
            "node": "00000000-0000-0000-0000-000000000005"
          },
          {
            "Input": 1,
            "Output": 2,
            "node": "00000000-0000-0000-0000-000000000005"
          }
        ],
        "Model": {
          "CroppingThreshold": 10
        }
      },
      {
        "Uid": "00000000-0000-0000-0000-000000000005",
        "Name": "FFMPEG Builder: Video Encode",
        "node": "FfmpegBuilderVideoEncode",
        "xPos": 100,
        "yPos": 630,
        "Outputs": 1,
        "connections": [],
        "Model": {
          "Codec": "h265",
          "HardwareEncoding": true,
          "Quality": 28
        }
      },      
      {
        "Uid": "00000000-0000-0000-0000-000000000006",
        "Name": "Remove All Audio",
        "node": "FfmpegBuilderAudioTrackRemover",
        "xPos": 450,
        "yPos": 110,
        "Outputs": 2,
        "connections": [
          {
            "Input": 1,
            "Output": 1,
            "node": "00000000-0000-0000-0000-000000000007"
          },
          {
            "Input": 1,
            "Output": 2,
            "node": "00000000-0000-0000-0000-000000000007"
          }
        ],
        "Model": {
          "StreamType": "Audio",
          "RemoveAll": true,
          "RemoveIndex": 0,
          "Pattern": null,
          "NotMatching": false,
          "UseLanguageCode": false
        }
      },
      {
        "Uid": "00000000-0000-0000-0000-000000000007",
        "Name": "Add Audio",
        "node": "FfmpegBuilderAudioAddTrack",
        "xPos": 450,
        "yPos": 280,
        "Outputs": 1,
        "connections": [
          {
            "Input": 1,
            "Output": 1,
            "node": "00000000-0000-0000-0000-000000000008"
          }
        ],
        "Model": {
          "Index": 0,
          "Codec": "eac3",
          "Channels": 0,
          "Bitrate": 0
        }
      },
      {
        "Uid": "00000000-0000-0000-0000-000000000008",
        "Name": "FFMPEG Builder: Executor",
        "node": "FfmpegBuilderExecutor",
        "xPos": 450,
        "yPos": 430,
        "Outputs": 2,
        "Model": {
          "HardwareDecoding": true
        }
      },
      {
        "Uid": "00000000-0000-0000-0000-000000000009",
        "Name": "",
        "node": "ReplaceOriginal",
        "xPos": 450,
        "yPos": 610,
        "Outputs": 1,
        "connections": [],
        "Model": {
          "MoveFolder": true,
          "DeleteOriginal": true,
          "DestinationPath": "D:\\videos\\converted"
        }
      },      
      {
        "Uid": "00000000-0000-0000-0000-000000000010",
        "Name": "Move File",
        "node": "MoveFile",
        "xPos": 450,
        "yPos": 610,
        "Outputs": 1,
        "Model": {
            "MoveFolder": true,
            "DestinationPath": "/media"
        }
      },
      {
        "Uid": "00000000-0000-0000-0000-000000000011",
        "Name": "Delete Source Folder",
        "node": "DeleteSourceDirectory",
        "xPos": 450,
        "yPos": 750,
        "Outputs": 2,
        "Model": {
            "IfEmpty": true,
            "IncludePatterns": []
        }
    }
    ],
    "fields": [
        {
            "uid": "00000000-0000-0000-0000-000000000005",
            "type": "Select",
            "label": "Video Codec",
            "help": "The video codec to use for encoding",
            "parameters": {
                "options": [
                    {
                        "label": "H.264",
                        "value": {
                            "Codec": "h264",
                            "HardwareEncoding": true,
                            "Quality": 23
                        }
                    },
                    {
                        "label": "H.264 (10-Bit)",
                        "value": {
                            "Codec": "h264 10BIT",
                            "HardwareEncoding": true,
                            "Quality": 23
                        }
                    },
                    {
                        "label": "H.265",
                        "value": {
                            "Codec": "h265",
                            "HardwareEncoding": true,
                            "Quality": 28
                        }
                    },
                    {
                        "label": "H.265 (10-Bit)",
                        "value": {
                            "Codec": "h265 10BIT",
                            "HardwareEncoding": true,
                            "Quality": 28
                        }
                    }
                ]
            }
        },
        {
            "uid": "00000000-0000-0000-0000-000000000007",
            "type": "Select",
            "name": "Codec",
            "label": "Audio Codec",
            "help": "The audio codec to use for encoding",
            "parameters": {
                "options": [
                    {
                        "label": "Keep Original Audio",
                        "value": "OUTPUT:00000000-0000-0000-0000-000000000005:1:00000000-0000-0000-0000-000000000008"
                    },
                    {
                        "label": "AC3",
                        "value": "ac3"
                    },
                    {
                        "label": "AAC",
                        "value": "aac"
                    },
                    {
                        "label": "EAC3",
                        "value": "eac3"
                    }
                ]
            }
        },
        {
          "uid": "00000000-0000-0000-0000-000000000008",
          "type": "Select",
          "name": "Output-1",
          "label": "Output File",
          "help": "Where the newly converted file should be saved to",
          "parameters": {
            "options": [
              {
                "label": "Replace Original File",
                "value": "00000000-0000-0000-0000-000000000009"
              },
              {
                "label": "Save to Folder",
                "value": "00000000-0000-0000-0000-000000000010"
              }
            ]
          }
        },
        {
          "uid": "00000000-0000-0000-0000-000000000010",
          "type": "Directory",
          "required": true,
          "label": "Destination",
          "help": "The destination directory where the file should be save to",
          "name": "DestinationPath",
          "default": "/media",
          "conditions": [
            {
              "Property": "Output File",
              "Value": "00000000-0000-0000-0000-000000000010"
            }
          ]
        },
        {
          "uid": "00000000-0000-0000-0000-000000000010",
          "type": "Switch",
          "name": "DeleteOriginal",
          "default": false,
          "label": "Delete Original File",
          "help": "If the original file should be deleted after converting",
          "conditions": [
            {
              "Property": "Output File",
              "Value": "00000000-0000-0000-0000-000000000010"
            }
          ]
        },
        {
            "uid": "00000000-0000-0000-0000-000000000003",
            "type": "Switch",
            "name": "Output-1",
            "default": false,
            "label": "Crop Black Bars",
            "help": "Automatically crop black bars if detected",
            "value": {
                "true": "00000000-0000-0000-0000-000000000004",
                "false": "00000000-0000-0000-0000-000000000005"
            }
        },
        {
            "uid": "00000000-0000-0000-0000-000000000005",
            "type": "Switch",
            "name": "Output-1",
            "default": false,
            "label": "Remove Other Audio",
            "help": "When set all other audio tracks will be removed except the one you added",
            "value": {
                "true": "00000000-0000-0000-0000-000000000006",
                "false": "00000000-0000-0000-0000-000000000007"
            },
            "conditions": [
              {
                "Property": "Audio Codec",
                "Value": "OUTPUT:00000000-0000-0000-0000-000000000005:1:00000000-0000-0000-0000-000000000008",
                "IsNot": true
              }
            ]
        }
    ]
  }